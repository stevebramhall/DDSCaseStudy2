---
title: "Employe Attrition Study"
author: "Steve Bramhall, Hayley Horn"
date: "November 21, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE) # each code chunk will have their own echo control
```

```{r message=FALSE, warning=FALSE}
# Load Libraries
library(dplyr)      # for string functions
library(ggplot2)    # for plots
library(kableExtra) # for table formatting
library(knitr)      # for presenting in html
library(Hmisc)        # for describing data
#library(metafor)
#library(glmulti)

```

<h4>Abstract</h4><br>

Employees are valuable assets of an organization, and the unexpected departure of a key employee can be disruptive and costly. Employee Benefit News (EBN) reports that it costs employers 33% of a worker's annual salary to hire a replacement if that worker leaves. An internal measure of factors associated with an employee's potential attrition can help management either intervene or mitigate the disruption caused by unplanned staff turnover. This analysis is designed to identify determinants factors of employee attrition. A range of variables were reviewed that fell under the following categories: tenure, training and development opportunities, compensation, management/leadership, work environment, social support, and some attitudindal measures.<br>

The study reached the conclusion that there are certain indicators, that when present are a reasonable indicator that an employee shows signs consistent with attrition. There are also additional findings that hint to was to improve employee retention, which are opportunities to retain staff and reduce the risk of attrition. 

<h4>Keywords</h4><br>
Talent Mangement, Employee Attrition, Determining Factors, Retention<br>

```{r echo = TRUE}
# Read employee data from the training csv file and name the dataset train.Then rename columns to be more readable.
train <- read.csv(".\\InputFiles\\CaseStudy2-data.csv",header=TRUE,sep=",",encoding = "UTF-8")

# Read employee data from the validation csv file and names the dataset train.Then rename columns to be more readable.
validate <- read.csv(".\\InputFiles\\CaseStudy2Validation.csv",header=TRUE,sep=",",encoding = "UTF-8")

alldata = rbind(train,validate) # create dataframe with all data to clean all at same time

#Change gender from M/F to 1/0
```

Data Exploration
```{r DE}

#Review the structure of the data
str(train)

##RESULTS
#########1170 observations 
#########37 variables (9 factors, 27 integers, 1 random number)

#HMisc describe gives more details than str
###I prefer the details in a data dictionary format- but let's discuss
#Hmisc::describe(train, digits = 2, tabular = TRUE)
Hmisc::describe(alldata, digits = 2, tabular = TRUE)

# Reviewed train and validate data to confirm factor variable values exist in both
# Remove variables where all values are the same: StandardHours, EmployeeCount, Over18
# Remove unrelated variable Rand
alldata <- select(alldata,-c(StandardHours, EmployeeCount, Over18,Rand))

##Manually created data dictionary based on results below with a notes field
#DataDict <- read.csv(".\\DataDictionary",header=TRUE,sep=",",encoding = "UTF-8")

``` 

### Look for multicollinear variables, need to add re-coded attrition
```{r}
library(corrplot)
M_df <- select_if(alldata, is.numeric) # get all numeric data
M <- cor(M_df)                         # convert to matrix
corrplot(M, method = "circle")         # Display the correlation coefficient
```

